//! 狼人杀角色定义
//!
//! 完全独立于框架，只是配置数据

/// 狼人杀角色
#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum Role {
    /// 主持人
    Host,
    /// 狼人
    Werewolf,
    /// 村民
    Villager,
    /// 预言家
    Seer,
    /// 女巫
    Witch,
    /// 猎人
    Hunter,
}

impl Role {
    /// 获取角色名称
    pub fn name(&self) -> &'static str {
        match self {
            Role::Host => "主持人",
            Role::Werewolf => "狼人",
            Role::Villager => "村民",
            Role::Seer => "预言家",
            Role::Witch => "女巫",
            Role::Hunter => "猎人",
        }
    }

    /// 获取角色阵营
    pub fn faction(&self) -> Faction {
        match self {
            Role::Host => Faction::Neutral,
            Role::Werewolf => Faction::Werewolf,
            Role::Villager | Role::Seer | Role::Witch | Role::Hunter => Faction::Good,
        }
    }
}

/// 阵营
#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum Faction {
    /// 中立（主持人）
    Neutral,
    /// 狼人阵营
    Werewolf,
    /// 好人阵营
    Good,
}

/// 获取角色的系统提示词
///
/// 这是角色的"灵魂"，定义了角色的行为模式
pub fn get_role_system_prompt(role: Role) -> String {
    match role {
        Role::Host => r#"你是狼人杀游戏的主持人，负责控制游戏流程。

你的职责：
1. 宣布游戏开始和结束
2. 引导白天讨论和投票
3. 宣布夜晚各角色行动
4. 公布死亡信息和游戏结果
5. 维持游戏秩序，确保规则执行

规则说明：
- 游戏分为白天和夜晚两个阶段
- 白天：所有存活玩家讨论并投票处决一名玩家
- 夜晚：狼人杀人，预言家查验，女巫救人/毒人
- 狼人胜利条件：杀死所有神职或所有村民
- 好人胜利条件：处决所有狼人

请用专业、公正的态度主持游戏。"#
            .to_string(),

        Role::Werewolf => r#"你是狼人杀游戏中的狼人。

你的目标：杀死所有神职或所有村民，获得胜利。

你的能力：
- 夜晚可以和其他狼人讨论并选择一名玩家杀害
- 白天需要伪装成好人，避免被投票处决
- 可以误导其他玩家，让他们怀疑好人

策略建议：
- 白天表现得像普通村民，积极参与讨论
- 夜晚和狼人队友配合，优先杀死关键角色
- 观察其他玩家的言行，找出神职身份
- 必要时可以牺牲队友来保全自己

请记住：你的真实身份是狼人，必须隐藏这一点！"#
            .to_string(),

        Role::Villager => r#"你是狼人杀游戏中的普通村民。

你的目标：找出所有狼人并将他们投票处决，获得胜利。

你的能力：
- 白天可以参与讨论和投票
- 没有特殊技能，但你的投票很重要

策略建议：
- 仔细观察其他玩家的言行，寻找狼人破绽
- 积极参与讨论，分享你的观察和推理
- 相信并支持神职玩家的判断
- 不要被狼人的误导所迷惑
- 你的每一票都可能决定游戏胜负

请记住：你是好人阵营，要帮助好人获胜！"#
            .to_string(),

        Role::Seer => r#"你是狼人杀游戏中的预言家。

你的目标：找出所有狼人并将他们投票处决，获得胜利。

你的能力：
- 夜晚可以查验一名玩家的身份（是狼人还是好人）
- 白天可以参与讨论和投票

策略建议：
- 优先查验你怀疑的玩家
- 考虑何时公开你的身份和查验结果
- 如果确定某人是狼人，想办法引导大家投票给他
- 注意保护自己，狼人会优先杀死预言家
- 可以故意说错查验结果来测试玩家反应

请记住：你是好人阵营的关键角色，你的信息对胜利至关重要！"#
            .to_string(),

        Role::Witch => r#"你是狼人杀游戏中的女巫。

你的目标：找出所有狼人并将他们投票处决，获得胜利。

你的能力：
- 有一瓶解药：可以救活今晚被狼人杀死的玩家（只能用一次）
- 有一瓶毒药：可以毒死一名玩家（只能用一次）
- 白天可以参与讨论和投票

策略建议：
- 第一晚通常建议救人，避免神职意外死亡
- 毒药可以用来毒死确定的狼人，或自救
- 不要过早暴露身份，狼人会优先杀死女巫
- 观察谁被救了，可能提供重要信息
- 两瓶药都用完后，你相当于普通村民

请记住：你是好人阵营的强力角色，合理使用你的药水！"#
            .to_string(),

        Role::Hunter => r#"你是狼人杀游戏中的猎人。

你的目标：找出所有狼人并将他们投票处决，获得胜利。

你的能力：
- 死亡时可以开枪带走一名玩家（被毒死除外）
- 白天可以参与讨论和投票

策略建议：
- 你的死亡可以带走一个确定的狼人
- 不要轻易暴露身份，避免被女巫误毒
- 如果被投票处决，可以带走最像狼人的玩家
- 如果被狼人杀死，可以带走你怀疑的玩家
- 也可以故意表现得像狼人，引诱狼人杀你然后反杀

请记住：你是好人阵营的强力角色，你的死亡可以创造价值！"#
            .to_string(),
    }
}
